---
title: 弹幕管理
description: 弹幕管理
---

## 获取弹幕

只有弹幕库中的弹幕才能被装填到视频上。

有两种方式可以获取弹幕：

### 内置搜索

插件的搜索功能可以从第三方弹幕源中获取弹幕。

支持的第三方弹幕源有：

- [弹弹 Play](https://www.dandanplay.com/)（默认）
- [B站](https://www.bilibili.com/)

可以在设置页面中启用或禁用这些弹幕源。

未来会添加对更多弹幕源的支持。

:::caution[关于B站]
B站的搜索结果和弹幕获取结果和登录状态有关。如果发现搜索结果不符合预期，或者获取弹幕数量不足，可能是没有登录账号导致的，请前往[bilibili.com](https://www.bilibili.com/)登录。

同时，与B站的所有交互都会以当前登录账号的身份进行，包括搜索和获取弹幕。
:::

### 用户上传

在弹出界面的弹幕列表页面中可以导入本地弹幕文件。

支持的弹幕文件格式有 `.xml` 和 `.json`。

不支持 `.ass` 和 `.srt` 等“字幕”文件。这类文件一般通过 `.xml` 转换而来，导入时请使用原始文件。

插件可以识别一些常见的 `.xml` 和 `.json` 格式，但不保证所有格式都能被识别。发现无法识别的格式请提交[功能请求](https://github.com/Mr-Quin/danmaku-anywhere/issues/new)。

:::note
插件不保存用户上传的原始文件，只保存解析后的弹幕数据。在导出时无法还原原始文件，请勿作为备份功能使用。
:::

## 弹幕管理

弹幕库中的弹幕按来源归类，可以归类为**用户上传**（自定义）和**内置搜索**（弹弹Play，哔哩哔哩）。

主要区别在于**内置搜索**获得的弹幕拥有唯一 ID 作为标识，可以使用刷新和自动匹配功能。
用户上传的弹幕没有唯一标识，只能手动装填。

### 导出

由于弹幕库不享受浏览器的同步功能，弹幕数据只保存在当前设备上。

导出可以作为一种备份方式，在不同设备间传递弹幕。导出的文件格式为 `.json`，为 Danmaku Anywhere 的专用格式。

在弹出界面的弹幕列表页面中可以导出弹幕库，之后在导入页面中导入。

:::tip
弹幕库存在版本差异，但向下兼容。较新版本的插件导出的文件不一定能够在旧版本中导入，但旧版本导出的文件可以在新版本中导入。
:::
