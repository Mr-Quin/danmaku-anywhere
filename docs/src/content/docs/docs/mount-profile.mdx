---
title: 装填配置
description: 装填配置
---

装填配置是扩展的核心配置，用于指定扩展在哪些网页上生效，以及如何将弹幕装填到视频上。

同一网址最多只能有一个装填配置生效，如果有多个装填配置匹配到同一个网址，扩展会选择第一个匹配到的装填配置。

装填配置需要以下信息：

## 名称

就是一个名字，方便识别。

## 视频元素

视频元素的选择器，用于指定视频元素。扩展会将弹幕覆盖到这个元素上并与其同步。

:::tip
默认为`video`，基本没有改的必要。
:::

## 适配

用于关联[适配配置](/docs/integration-policy)。

## 网址（URL模式）

:::caution[关于iframe]
从v0.16.0起，不再区分iframe和非iframe，URL模式一律按主页面地址（即地址栏中的地址）填写。

v0.16.0之前的版本，如果视频嵌套在iframe中，需要填写iframe的地址，而不是网页本身的地址。
:::

相当于一个白名单，只有在这些网址上扩展才会生效。

装填配置对应的网址不是单一的地址，而是一个[**模式**](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Match_patterns)，可以匹配多个网址。

:::tip
基本上，如果希望匹扩展在`https://www.example.com`上生效，那么模式填写 `https://www.example.com/*` 或者 `https://*.example.com/*` 即可。
:::

拿B站为例，如果希望扩展在B站上生效，可以使用 `https://www.bilibili.com/*` 这个模式，这个模式可以匹配所有的B站视频网址。

如果填写 `https://www.bilibili.com/`，那么扩展只会在B站首页生效。

如果填写 `https://www.bilibili.com/video/*`，那么扩展只会在视频播放页生效。

如果填写 `https://*.bilibili.com/*`，那么扩展会在所有的B站子域名下生效，包括动态、空间、直播等。

其他例子：
- ip地址：`http://10.0.0.1/*`
- 含端口：`http://10.0.0.1:8080/*`
- 任意端口：`http://10.0.0.1:*/*`
- 本地服务器：`http://localhost/*`
- 本地`mp4`文件（注意三斜杠）：`file:///*.mp4`
- 任意HTTPS地址：`https://*/*`

:::note
模式结尾必须包含 `/`，比如 `/`、`/*`、`/abc`，否则会提示格式错误。

如果存在端口号，需要在模式中指定，比如`http://localhost:8080/*`或`http://localhost:*/*`。
:::

单个装填配置可以填写多个模式。

### `iframe`

有一个特殊情况是视频元素在 `iframe` 中，这种情况下需要填写 `iframe` 的地址，而不是网页本身的地址。

`iframe` 的地址可以通过使用浏览器的开发者工具查看 `iframe` 元素的 `src` 属性获得。

原因见[工作原理](/docs/limitations#iframe)。
